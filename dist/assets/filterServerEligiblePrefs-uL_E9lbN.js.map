{"version":3,"file":"filterServerEligiblePrefs-uL_E9lbN.js","sources":["../../utils/storage/filterServerEligiblePrefs.ts"],"sourcesContent":["import { UserPreferences } from '../../types/index';\n\n/**\n * Filter a diff/object to only include server-eligible preference fields.\n * Mirrors the server whitelist in supabase/functions/.../server/index.tsx\n * Ensures device-calendar/local-only fields never reach the server.\n */\nexport function filterServerEligiblePrefs(\n  diff: Partial<UserPreferences>\n): Partial<UserPreferences> {\n  if (!diff) return {};\n\n  const preferencesFields: (keyof UserPreferences)[] = [\n    'calendar_work_start',\n    'calendar_work_end',\n    'calendar_working_days',\n    'calendar_buffer_time',\n    'calendar_min_gap',\n    'gap_sync_frequency',\n    'autostart',\n    'show_timer',\n    'default_energy_level',\n    'preferred_categories',\n    'daily_reminder',\n    'notification_activity_reminders',\n    'notification_upcoming_gaps',\n    'notification_lead_time',\n    'dark_mode',\n    'sound_enabled',\n    'vibration_enabled',\n    'manual_mode',\n    'demo_mode',\n    'timezone',\n    'calendar_include_weekends',\n    'quiet_hours_start',\n    'quiet_hours_end',\n    'calendar_event_status',\n    'last_gap_sync',\n    'google_access_token',\n    'google_refresh_token',\n    'google_token_expires_at',\n  ];\n\n  const filtered: Partial<UserPreferences> = {};\n  for (const key of preferencesFields) {\n    if (Object.prototype.hasOwnProperty.call(diff, key)) {\n      (filtered as any)[key] = (diff as any)[key];\n    }\n  }\n\n  return filtered;\n}\n\n\n"],"names":["filterServerEligiblePrefs","diff","preferencesFields","filtered","key"],"mappings":"AAOO,SAASA,EACdC,EAC0B,CAC1B,GAAI,CAACA,EAAM,MAAO,CAAA,EAElB,MAAMC,EAA+C,CACnD,sBACA,oBACA,wBACA,uBACA,mBACA,qBACA,YACA,aACA,uBACA,uBACA,iBACA,kCACA,6BACA,yBACA,YACA,gBACA,oBACA,cACA,YACA,WACA,4BACA,oBACA,kBACA,wBACA,gBACA,sBACA,uBACA,yBAAA,EAGIC,EAAqC,CAAA,EAC3C,UAAWC,KAAOF,EACZ,OAAO,UAAU,eAAe,KAAKD,EAAMG,CAAG,IAC/CD,EAAiBC,CAAG,EAAKH,EAAaG,CAAG,GAI9C,OAAOD,CACT"}